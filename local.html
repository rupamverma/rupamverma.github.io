<!DOCTYPE html>
<html>
<head>
 <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title>
    Local weather
    </title>
    <style type="text/css">
        .button{
            
border:none;

display: inline-block;
color: #fff;
font-size: 2px;

border-radius: 5%;
padding:1%;
font-style: "Helvetica Neue", Helvetica, Arial, sans-serif;
 text-shadow: 1px 1px 2px black, 0 0 25px black, 0 0 5px black;

 font-size: 20px;
 ;

opacity:1;
background-color: #333;
      cursor:pointer;}
      .button:hover {
        opacity:0.9;
        }
        .button .button1{
          display: inline-block;
        }
#city,#region{
  display: inline-block;
}
.main{

        margin-top: 8%;  
        font-weight: bold; 

color: black;
 text-shadow: 1px 1px 2px white, 0 0 25px white, 0 0 5px white;
font-size: 35px;

font-family: 'Lobster';


 
}
.header{
  
    font-size: 60px;
    border-bottom: 2px solid transparent;
     width: 48%;
  box-shadow: 0 15px 20px rgba(0, 0, 0, 0.3);
   text-shadow: 1px 1px 2px black, 0 0 25px black , 0 0 5px black;
  padding-left: 3%;}
}

    </style>
         </head>
             <body >
               <div class="fluid-container">
                <div class="row">
                 <div class="col-xs-12 col-sm-offset-6">
                   <h1 class="header" style="color: #99ff88">Local Weather App</h1>
                     </div>
                     <div class="col-sm-offset-7 main">
                      <div id="city"></div>,
                         <div id="region"></div></div>
                          <div style="" class="col-xs-12 col-sm-offset-8">
                           <div style="color:black;font-weight: bold; font-size: 35px;text-shadow: 1px 1px 2px white, 0 0 25px white, 0 0 5px white;" id="country"></div>
                             </div>
                             <div style="" class="col-xs-12 col-sm-offset-7">
                         <div class="button" id="weatherType"></div>
                             <div class="button" id="fTemp"></div>
                               <div class="button" id="windSpeed"></div></div>
                               <div style="" class="change">
                            <input id="convert-button" type="button" class="btn btn-lg btn-primary col-sm-offset-0.5 " style="margin-top: 15%;  text-shadow: 1px 1px 2px black, 0 0 25px black , 0 0 5px black;"  value="  Convert: °F / °C" /></div>
                                     </div>  </div>
                                     <div style="background-color: #333" class="navbar navbar-fixed-bottom">
                                     <div class="col-sm-offset-4">
                                     <h4 style="color: white;font-family: 'Lobster'; font-size: 15px">Copyright@2017.All Right Reserved. Coded By Rupam</h4>
                                     </div></div></body>     

                                       
                                                 <script>
                                                   $(document).ready(function(){
                                                    var lat;
                                                    var long;
                                                    var city;
                                                      $.getJSON("http://ipinfo.io/json",function(data2){
                                                        console.log(data2);
                                                       lat=data2.loc.split(",")[0];
                                                        long=data2.loc.split(",")[1];
                                                        city =data2.city;
                                                        console.log(data2);

                                                  var countryUnits = "metric"; 
                                                                         
                                          var api='http://api.openweathermap.org/data/2.5/weather?lat=' + lat + '&lon=' +  // build query url.
                                          long + '&APPID=7c277fcc664e3e7978897fdbe3830700' +
                                          '&units=' + countryUnits + '&preventCache=' + new Date();   // Date prevents caching old data';
                                             console.log(api);
                                              $.getJSON(api,function(data){
                                                      console.log(data.api);
                                                        var weatherType= data.weather[0].description;
                                                        var kTemp = data.main.temp;
                                                         var windSpeed = data.wind.speed;
                                                            var city = data2.city;
                                                            var country=data2.country;
                                                            var region=data2.region;
                                                            
                                                            var fTemp;
                                                            var cTemp;
                                                            
                                                            
                                                            var tempSwap=true;
                                                            
                                                            fTemp = kTemp * 9 / 5 + 32;
                                                            cTemp = kTemp;
                                                            
                                                            console.log(city);
                                                            $("#city").html(city);
                                                            $("#region").html(region);
                                                            $("#country").html(country);
                                                            
                                                            $("#weatherType").html(weatherType);
                                                            $("#fTemp").html(fTemp + " &#8457; ");
                                                            $("#convert-button").click(function(){
                                                              
                                                              if(tempSwap===false){
                                                               
                                                                $("#fTemp").html(fTemp+ " &#8457; ");
                                                                tempSwap=true;
                                                              }
                                                              else{
                                                                
                                                                $("#fTemp").html(cTemp + " &#8451; ");
                                                                tempSwap=false;
                                                              }
                                                              
                                                            });
                                                            
                                                            windSpeed = (2.237*(windSpeed)).toFixed(1);
                                                            $("#windSpeed").html(windSpeed + " mph ");
                                                            if (cTemp > 27){
                                                              $('body').css('background-image','url(loc1.jpg)'); 
                                                            }
                                                            else if(cTemp > 16){
                                                                    $('body').css('background-image','url(loc2.jpg)');
                                                            }
                                                          else if(cTemp > 5){
                                                            $('body').css('background-image','url(loc3.jpg)');
                                                          }
                                                            else if(cTemp > -10){
                                                              $('body').css('background-image','url(loc4.jpg)');
                                                           
                                                            }
                                                          });
                                                        });http://
                                               console.log(lat+" "+long);

                                   
                                                        });

                                                            
                                            
                                                              


                                                    </script>
                                                    
                                                    </body>
                                                 </html>
