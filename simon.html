<!DOCTYPE html>
<html>
<head>
	<title></title>
	 <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.6/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
	 <link href="https://fonts.googleapis.com/css?family=Anton|Fjalla+One|Nunito" rel="stylesheet"><div class="container">
</head>
<style type="text/css">
	body{
	font-family: 'Nunito', sans-serif;
	background-image: url("https://wallpapercave.com/wp/OS6Fgxs.jpg");
	background-repeat: no-repeat;
	 background-size: cover;
}
	#main-board{
  margin: 0 auto;
  margin-top: 40px;
  border: solid 10px #424242;
  width: 600px;
  height: 600px;
  border-radius: 10px;

  box-shadow: -10px 10px 7px 0px rgba(50, 50, 50, 0.75);
}
	.red{
		background-color: #FF4081;
	}
	.red-active {
  background-color: #F50057 !important;
}
	.yellow{
		background-color: #FFCA28;
	}
	.yellow-active {
  background-color: #FFEB3B !important;
}
	.green{
		background-color: #43A047;
	}
	.green-active {
  background-color: darkgreen !important;
}
	.blue{
		background-color: #7E57C2;
	}
	.blue-active {
  background-color: #651FFF !important;
}
	.button{
		margin: 0;
  float: left;
  position: relative;
  width: 290px;
  height: 290px;
  z-index: 8;
  border: 5px solid #424242;
       }
       
       #panel{
       border: 15px solid #424242;
  height: 245px;
  width: 300px;
  border-radius: 10px;
  background-color: white;
  clear: both;
  position: absolute;
  z-index: 10;
  margin-top: -380px;
  margin-left: 140px;
  -webkit-box-shadow: -6px 8px 5px 0px rgba(50, 50, 50, 0.75);
       }
       .clear{
       	clear: both;
       }
       .play-btn{
       	width: 50px;
       	height: 38px;
       	padding-top: 3px;
       	margin-top: 8px;
       	margin-right: 10px;
       	margin-left: 30px
       	
       }
       .start{
       	float: left;
       }
        .btn{
        	margin-left: 18px;
        	font-weight: bold;
        }
        .headline{
        	text-align: center;
        	font-family: 'Anton', sans-serif;
        	font-size: 3em;
        	margin-top: 5px;
        }
        #count{
        	border: 4px solid #424242;
        	border-radius: 4px;
        	text-align: center;
        	font-size: 1.6em;
        	padding-top: 0px;
        	font-weight: bold;
        	background-color:#0097A7;
        	box-shadow: 7px 10px 34px 1px rgba(0, 0, 0, 0.68), inset -1px -6px 12px 0.1px #0097A7;
        }
        #start{
        	border: 3px solid #424242;
        	background-color: #D50000;
        	border-radius: 50px;
        	box-shadow: 0px 3px 0px 0px #222121, inset -1px -3px 10px 1px #B71C1C;
        }
         #strict{
        	border: 3px solid #424242;
        	background-color: yellow;
        	border-radius: 50px;
        	box-shadow: 0px 3px 0px 0px #222121, inset -1px -3px 10px 1px yellow;
        }
        .square{
        	border: 4px solid #424242;
        	width: 33px;
        	height: 33px;
        	margin-left: 40px;
        	background-color: #B71C1C;
        	border-radius: 50px;
        	box-shadow: 0px 3px 0px 0px #222121, inset -1px -3px 10px 1px #B71C1C;
        	
        }
       
       
        .square-on{
        	background-color: green;
        }
       .inline {
  display: inline-block;
  vertical-align: middle;
}
        .switch-box{
        	
        	margin-left: 20px;


        }
       .outer-switch {
  border: solid 3px #424242;
  width: 65px;
  height: 30px;
  background-color: #616161; 
  border-radius: 6px; 

}
        .outer-active{
        	background-color: #0277BD !important;

        }
        .inner-switch {
  background-color: #0277BD;
  width: 35px;
  height: 26px;
  position: relative !important;
  border-bottom: 2px solid #424242;
  border-right: 2px solid #424242;
}
        .inner-inactive{
        	background-color: #616161 !important;
        }
        p{
        	padding-top: 8px;
        	padding-right: 8px;
        	font-weight: bold;
        	font-size: 1.5em;
        }
          p.on{
        	
        	font-weight: bold;
        	font-size: 1.5em;
        }
        .square-green{
        	background-color: green;
        	box-shadow: 0px 3px 0px 0px #222121, inset -1px -3px 10px 1px green;
        }@media only screen and (min-width: 240px) and (max-width: 767px){
  .button{
    width:180px;
    height:180px;
    
  }
  #main-board{
  height:380px;
  width:380px;
  margin:50px auto;
  margin-left:0px;;
  }
  #panel{
  width:240px;
  height:200px;
  position:absolute;
  margin-left:60px;
  margin-top:-280px;
 border: 6px solid  #4E342E;
  background-color:#fff;
  border-radius:10px;
}
.play-btn{
  float:left;
  border:2px solid #000;
  width:40px;
  height:33px;
 
  text-align:center;
  font-weight:bold;
  margin-left:25px;
  
}
.btn{
  margin:4px;
  
}
.square-box{
  margin-left: 5px;
  }
.square{
  width:30px;
  height:30px;
  }
p{
        	padding-top: 8px;
        	padding-right: 2px;
        	font-weight: bold;
        	font-size: 1em;
        }
          p.on{
        	
        	font-weight: bold;
        	font-size: 1em;
        }
        .outer-switch {
  
  width: 60px;
  height: 30px;
 }
 .inner-switch {
   width:30px;
 }
 #count{
   font-size:1.2em;
 }
 body{
  background-color:#1DE9B6;
  background-image:0;
 }
 .headline{
   font-size:1.6em;
 }
       
       
          
</style>
<body>

<div class="col-xs-12">
<div id="main-board">
	<div id="0" class="button red"></div>
	    <div id="1" class="button yellow"></div>
	      <div id="2" class="button green"></div>
	        <div id="3" class="button blue"></div>
	         <div class="clear"></div>
             <div id="panel">
             <h1 class="headline">Simon</h1>
             <div class="start play-btn" id="count">00</div>
             <div class="start play-btn" id="start"></div>
             <div class="start play-btn" id="strict"></div>
              <div class="btn">Count</div>
             <div class="btn">Start</div>
             <div class="btn">Strict</div>
             <div class="square inline"></div>
             <div class="switch-box inline">
        <p class="off inline">OFF</p>
        <div class="switch outer-switch inline"><div class="inner-switch"></div></div>
        <p class="on inline">ON</p>
             </div>
      </div>
   </div>
</div>
<script type="text/javascript">
var userPlayed = [];
	var simonPlayed = [];
	const win_case = 20;
	var id,color;
	var point = 0;
	var strict = false;
	var error = false;
	var gameStart = false;
	var soundArr = [
  "https://s3.amazonaws.com/freecodecamp/simonSound1.mp3", //green
  "https://s3.amazonaws.com/freecodecamp/simonSound2.mp3", //red
  "https://s3.amazonaws.com/freecodecamp/simonSound3.mp3", //yellow 
  "https://s3.amazonaws.com/freecodecamp/simonSound4.mp3" //blue   
	];

	  $(document).ready(function(){
	  	$("#count").text("");
	  	  $(".switch").click(function() {    
    gameStart = (gameStart == false) ? true : false;
    console.log(gameStart);
    if(gameStart) {
      $(".square").addClass("square-green");
      $(".inner-switch").addClass("inner-inactive");
      $(".switch").addClass("outer-active");
      $("#count").text("00")
    }
    else {
     $(".square").removeClass("square-green");
      $(".inner-switch").removeClass("inner-inactive");
      $(".switch").removeClass("outer-active");
      $("#count").text("");
    }   

    $("#start").click(function(){
	  		strict = false;
	  		error = false;
	  		point = 0;
	  		point++;
	  		userPlayed = [];
	  		simonPlayed = [];
	  		simonBoard();
	  		
	  	}) 
    	$("#strict").click(function(){
	  		point = 0;
	  		point++;
	  		strict = true;
	  		userPlayed = [];
	  		simonPlayed = [];
	  		simonBoard();

	  	})
  })
	  	
	  	$(".button").click(function(){
          id = $(this).attr("id");
          color = $(this).attr("class").split(" ")[1];
          userBoard();

	  	});
	  
	 
})
      function userBoard(){
      userPlayed.push(id);
  	console.log(id+" "+color);
  	console.log(userPlayed);
  	addColorActive(id,color);
    if(!checkUserBoard()) {

    	if(strict){
          console.log("strict");  
          simonPlayed = [];
          point = 1;
    	}
    	error = true;
       	errorOccur();
       	userPlayed = [];
       	simonBoard();

       }

  	  else if(userPlayed.length==simonPlayed.length && userPlayed.length<win_case){
  	  	point++;
  	  	userPlayed = [];
  	  	error = false;
  	  	simonBoard();
  	  }
  	   if(userPlayed.length==win_case){
  	   	gameWinner();
  	   	resetGame();
  	   }
      }
	       function checkUserBoard(){
	       	for(var i=0;i<userPlayed.length;i++){
	       		if(userPlayed[i] != simonPlayed[i]){
	       			return false;
	       		}
	       	}
	       	return true;
	       }
            
           function errorOccur() {
  console.log("error");  
  var counter = 0;
  var myError = setInterval(function() {
    $("#count").text("!!");
    counter++;
    if(counter == 3) {
      $("#count").text(point);
      clearInterval(myError);
      userPlayed = [];
      counter = 0;
    }
  }, 500);
}


	   function simonBoard(){
	   	$("#count").text(point);
	   	if(!error){
	   		getRandomNum();
	   	}
	   	if(error && strict){
	   		getRandomNum();
	   	}
	   	var i=0;
	   	var simonInterval = setInterval(function(){
          id = simonPlayed[i];
          color = $("#"+id).attr("class").split(" ")[1];
          console.log(id+" "+color);
          addColorActive(id,color);
          i++;
          if(i==simonPlayed.length){
          	clearInterval(simonInterval);
          }
	   	},1000)
	   }

	    function getRandomNum(){
	    	var random = Math.floor(Math.random()*4);
	    	simonPlayed.push(random);
	    	console.log(simonPlayed);
	    }
	    function addColorActive(id,color){
	    	 $("#"+id).addClass(color+"-active");
         playSound(id);
            setTimeout(function(){
            $("#"+id).removeClass(color+"-active");
          }, 500);
   }
     function gameWinner(){
     	var count = 0;
     	var winInterval = setInterval(function(){
     		count++;
     		$("#count").text("Win");
     		if(count==5){
     			clearInterval(winInterval);
     			$("#count").text("00");
     			count = 0;
     		}

     	},500);
     }

      function playSound(id){
      	var sound = new Audio(soundArr[id]);
      	sound.play();

      }
      function resetGame(){
      	userPlayed = [];
      	simonPlayed = [];
      	point = 0;
      	$("#count").text(point);

      }



</script>

</body>
</html>
